[{"title":"使用mysql实现七种连接方式","url":"//2021/10/28/%E4%BD%BF%E7%94%A8mysql%E5%AE%9E%E7%8E%B0%E5%A4%9A%E7%A7%8D%E8%BF%9E%E6%8E%A5%E6%96%B9%E5%BC%8F/","content":"使用mysql实现七种连接方式先建两张表：\nCREATE DATABASE db0206;USE db0206# 姓名表create table table_name(\tid int(11) primary key auto_increment,\tuser_id int(11) default 0,\tname varchar(5) default &#x27;&#x27;);# 年龄表create table table_age(\tid int(11) primary key auto_increment,\tuser_id int(11) default 0,\tage int(11) default 0);\n\n建好表后随便添加几条数据\n# 名字表少一条 user_id = 3insert into table_name(user_id, name)values(1, &quot;小赵&quot;), (2, &quot;小钱&quot;);# 年龄表少一条 user_id = 2insert into table_age(user_id, age)values(1, 21), (3, 23);\n\n\nInner Joinmysql&gt; select a.user_id, name, age      -&gt; from table_name as a inner join table_age as b      -&gt; on a.user_id=b.user_id;# 输出结果+---------+--------+------+| user_id | name   | age  |+---------+--------+------+|       1 | 小赵   |   21 |+---------+--------+------+\n\nLeft Joinmysql&gt; select a.user_id, name, agefrom table_name as a left join table_age as bon a.user_id=b.user_id;# 输出结果+---------+--------+------+| user_id | name   | age  |+---------+--------+------+|       1 | 小赵   |   21 ||       2 | 小钱   | NULL |+---------+--------+------+\n\nRight Joinmysql&gt; select b.user_id, name, agefrom table_name as a right join table_age as bon a.user_id=b.user_id;+---------+--------+------+| user_id | name   | age  |+---------+--------+------+|       1 | 小赵   |   21 ||       3 | NULL   |   23 |+---------+--------+------+\n\n\nUnionmysql&gt; select a.user_id, name, age from table_name as a left join table_age as bon a.user_id =b.user_idunionselect b.user_id, name, age from table_name as a right join table_age as bon a.user_id =b.user_id;+---------+--------+------+| user_id | name   | age  |+---------+--------+------+|       1 | 小赵   |   21 ||       2 | 小钱   | NULL ||       3 | NULL   |   23 |+---------+--------+------+\n\nLeft Join Excluding Inner Joinmysql&gt; select a.user_id, name, age    -&gt; from table_name as a left join table_age as b    -&gt; on a.user_id=b.user_id    -&gt; where b.user_id is null;    +---------+--------+------+| user_id | name   | age  |+---------+--------+------+|       2 | 小钱   | NULL |+---------+--------+------+\n\nRight Join Excluding Inner Joinmysql&gt; select b.user_id, name, age    -&gt; from table_name as a right join table_age as b    -&gt; on a.user_id=b.user_id    -&gt; where a.user_id is null;    +---------+------+------+| user_id | name | age  |+---------+------+------+|       3 | NULL |   23 |+---------+------+------+\n\n\n\nOuter Join Excluding Inner Joinmysql&gt; select a.user_id, name, age    -&gt; from table_name as a left join table_age as b    -&gt; on a.user_id =b.user_id    -&gt; where b.user_id is null    -&gt; union    -&gt; select b.user_id, name, age    -&gt; from table_name as a right join table_age as b    -&gt; on a.user_id =b.user_id    -&gt; where a.user_id is null;    +---------+--------+------+| user_id | name   | age  |+---------+--------+------+|       2 | 小钱   | NULL ||       3 | NULL   |   23 |+---------+--------+------+\n\n\n\n","tags":["南邮","南京邮电大学","mysql","join"]},{"title":"MacOS安装与配置nginx","url":"//2021/10/23/MacOS%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AEnginx/","content":"MacOS安装与配置nginx一、环境我用的是MacBook Pro M1，版本放在图里了。以下使用的终端都是iTerm2。\n\n二、安装HomebrewHomebrew是一款包管理工具，目前支持macOS和linux系统，Homebrew使用起来也很方便，如果已经安装好homebrew可以跳过这一条。\nARM版Homebrew需要安装在/opt/homebrew路径下，早期的时候需要手动创建目录执行命令，目前使用最新脚本不需要手动操作。\n直接执行：（这是官网给的命令，需要挂梯子）\n/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;\n\n国内：\n/bin/zsh -c &quot;$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)&quot;\n\n后面根据提示往下走就行，网上教程很多随便查查就有。\n安装完成之后重启终端执行：\nbrew -v\n\n我的结果⬇️，提示版本信息安装完成。\n\n三、通过Homebrew安装nginx先查一下nginx是否存在：\nbrew search nginx\n\n\n然后执行：\nbrew install nginx\n\n等待一会安装就完成了。然后使用brew info nginx命令查看nginx安装目录等信息。红色部分是nginx.config的位置，在旧版本Mac中应该是/usr/local/etc/nginx目录下，这里要注意一下。\n\n用vim编辑nginx.conf配置自己需要的东西吧。\n","tags":["nginx","MacOS","homebrew安装"]},{"title":"南邮信息安全技术作业","url":"//2022/01/09/%E5%8D%97%E9%82%AE%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%8A%80%E6%9C%AF%E4%BD%9C%E4%B8%9A/","content":"信息安全技术作业习题:2-1：分别采用恺撒算法和围栏算法加密明文“ meet you at six”。是否可以将凯撒算法和围栏算法结合，产生一个新的加密算法？如果可以，请用新算法加密明文 “meet you at six”。\n凯撒算法\n明文: meet you at six\n密文: PHHW BRX DW VLA\n\n围栏算法\nm e y u t i\n  e t o a s x\n密文:MEYUTIETOASX\n\n\n先用凯撒算法对密文加密，再对一次加密使用围栏算法。\n习题2-2：采用矩阵加密法加密明文“ meet you at six”，请采用3×4矩阵，密钥为3142。3 1 4 2\nm e e t\ny o u a\nt s i x\n密码：EUIMYTTAXEOS\n习题2-3：假设选取素数p=47，q=73，选取私钥d=167，问题：（1）计算RSA算法对应的公钥。（2）如果采用RSA算法加密 “HAPPY WEEK END”，应该如何对该数据进行编码？并且说明这样编码的合理性，给出编码的结果。\nn= p * q = 3431, ∅(n) = 3312\n\n167e - 3312i = 1\n167e - (3312 mod 167)i = 167e - 139i = 1\n28e - 139i = 1\n28e - 27i = 1\ne - 27i = 1\n\n令 i = 0 代入5. 知道e = 1，代入4知道i = 1, do untill 知道e = 119\n\nA ⇒ 01…Z ⇒ 26，两个一组。\n因为最大值2626 &lt; n = 3431，可以使用。\n密文：……\n\n\n习题2-4：对于Diffie-Hellman密钥生成算法，假定q=79，å=67，XA=37，XB=23，问题：（1）写出计算A的公钥YA和B的公钥YB的公式，并且求出结果。(2）分别写出A计算密钥的公式和B计算密钥的公式，并且分别计算其结果．（3） Diffie-Hellman密钥生成算法生成的密钥是用于传统加密算法，还是用于公钥加密算法？为什么？\n\n\n\n$$Y_A = \\alpha^{X_A} \\bmod q,Y_B = \\alpha^{X_B} \\bmod q$$\n\n\n\n$$K_{A,B} = (Y^{X_A}B) \\bmod q,K{B,A} = (Y^{X_B}_A) \\bmod q$$\n\n传统密码体系，只是基于公钥密码体系密钥协商算法。\n\n习题3-1：假设已知A与C之间存在共享密钥KA,C，B与C之间存在共享密钥KB,C。（1）试采用讲义约定的报文交互方式，设计一个协议，使得A能够向B验证其真实身份，并通过文字说明A和B需要进行的关键处理。（2）如果要求A能够生成A与B之间的共享密钥KA,B，并且安全地将KA,B传递给B，需要如何改进以上设计的真实性验证协议？（3）具体罗列A和B分别需要进行的关键处理步骤，分析该协议能够实现真实性验证的理由，以及能够安全传递A、B之间共享密钥的理由。（4）分析该协议是否存在重播攻击可能，如果存在，应该如何进一步修改协议，进行防范？\n\n\n\n$$\\begin{align*}&amp; M1 \\quad A \\to C: A,B,N_A\\&amp; M2 \\quad C \\to A:K_{A,C}{N_A,B,K_{B,C}{A}}\\&amp; M3 \\quad A \\to B:K_{B,C}{A}\\&amp; M4 \\quad B \\to A:K_{B,C}{N_B}\\&amp; M5 \\quad A \\to C:K_{A,C}{A,K_{B,C}{N_B}}\\&amp; M6 \\quad C \\to A:K_{A,C}{K_{B,C}{N_B-1}}\\&amp; M7 \\quad A \\to B:K_{B,C}{N_B-1}\\end{align*}$$\n\n\n\n$$\\begin{align*}&amp; M1 \\quad A \\to C:K_{A,C}{A,B,N_A,K_{A,B}}\\&amp; M2 \\quad C \\to A:K_{A,C}{N_A,B,K_{B,C}{A,K_{A,B}}}\\&amp; M3 \\quad A \\to B:K_{B,C}{A,K_{A,B}}\\&amp; M4 \\quad B \\to A:K_{A,B}{N_B}\\&amp; M5 \\quad A \\to B:K_{A,B}{N_B-1}\\\\end{align*}$$\n\n在M1中使用一次性数可以防止攻击方的重播攻击。在M2中当A收到C的报文后解密通过一次性数 和标识符B确认本次真实性。在M3中只有B可以解密与A新的会话密钥，为此为了确认是否为真的 密钥，B使用一次性标识进一步验证密钥的真实性，并希望收到A返回的通过密钥加密的NB-1。\n基于时间戳的改进：\n\n$$\\begin{align*}&amp; M1 \\quad A \\to C:K_{A,C}{A,B,N_A,K_{A,B}}\\&amp; M2 \\quad C \\to A:K_{A,C}{N_A,B,K_{B,C}{A,K_{A,B},T}}\\&amp; M3 \\quad A \\to B:K_{B,C}{A,K_{A,B},T}\\&amp; M4 \\quad B \\to A:K_{A,B}{N_B}\\&amp; M5 \\quad A \\to B:K_{A,B}{N_B-1}\\\\end{align*}$$\n保证时间 T 满足：| CLOCK - T | &lt; Δ_t1_ + Δ_t2_，其中 CLOCK 是 A,B 收到报文M2,M3的时间，Δ_t1_ 、 Δ_t2_ 分别表示服务器与AB时钟误差，报文在网络中传播的最大延迟，对于B还要包括A处理报文的延迟。\n基于一次性数的改进：$$\\begin{align*}&amp; M1 \\quad A \\to B: A\\&amp; M2 \\quad B \\to A:K_{B,C}{A,N’B}\\&amp; M3 \\quad A \\to C:A,B,N_A,K{B,C}{A,N’B}\\&amp; M4 \\quad C \\to A:K{A,C}{N_A,B,K_{A,B},K_{B,C}{K_{A,B},A,N’B}}\\&amp; M5 \\quad A \\to B:K{B,C}{K_{A,B},A,N’B}\\&amp; M6 \\quad B \\to A:K{A,B}{N_B}\\&amp; M7 \\quad A \\to B:K_{A,B}{N_B-1}\\end{align*}$$\n习题4-6：假设某网络系统限定用户A1可以“读/写”访问目录D1、D2和D3中的文件，用户A2可以“读/写”访问目录D2和D3中的文件，用户A3可以“读/写”访问目录D3中的文件。问题：（1）采用DAC策略实现以上访问控制，并说明实现过程。（2）采用MAC策略实现以上访问控制，并说明实现过程。（3）如果A3在A2中驻留了“特洛伊木马”软件，A3是否可以看到D2目录中的文件？为什么？\n假定D1、D2、D3拥有者都是A1，并且都采用DAC策略，实现访问控制控制表如下：\n\n\n\n\n主体\n客体\n控制\n操作\n\n\n\nA1\nD1\n允许\n读/写\n\n\nA1\nD2\n允许\n读/写\n\n\nA1\nD3\n允许\n读/写\n\n\nA2\nD2\n允许\n读/写\n\n\nA2\nD3\n允许\n读/写\n\n\nA3\nD3\n允许\n读/写\n\n\n*\n*\n禁止\n读/写\n\n\n\n定义A1的安全等级为S，A2安全等级是C，A3安全等级是U，D1等级为S，D2等级是C，D3等级是U。S&gt;C&gt;U。\n\n\n\n主体\n客体\n控制\n操作\n\n\n\nA1\nD1\n允许\n读/写\n\n\nA1\nD2\n允许\n读\n\n\nA1\nD3\n允许\n读\n\n\nA2\nD2\n允许\n读/写\n\n\nA2\nD3\n允许\n读\n\n\nA3\nD3\n允许\n读/写\n\n\n*\n*\n禁止\n读/写\n\n\n\n对于DAC无法防范，因为特洛伊病毒可以将A2访问的数据写入A2 A3都可以访问的数据中。\n对于MAC无法防范，因为特洛伊病毒无法将A2读取的文件写入A3可以访问的文件中。\n\n\n习题4-104.10 如果需要设置一个分组过滤器，作为公共互联网与企业外部网之间的网络层防火墙。其安全策略是：(a)只允许公共互联网访问企业外部网中的 www 服务器（210.110.10.1）和邮件服务器（210.110.10.3）；\n(b)不允许attacker.com 域名的子网(220.10.160.0)中的站点访问该 www 服务(端口号为80)，不允许spam.com 域名的子网（230.101.130.0）访问该电子邮件服务(端口号为25）。问：（1）请设计该分组过滤器的访问控制列表，并说明各项含义、（2）如果发现公共互联网的一个网站(240.10.12.1)是一个恶意网站，如何更新网络层防火墙的配置，保护企业外部网的www 服务器和邮件服务器？\n\n\n\n\n动作\n源IP\n源端口\n目的IP\n目的端口\n说明\n\n\n\n禁止\n220.10.160.0\n*\n210.110.10.1\n80\n禁止访问WWW\n\n\n禁止\n230.101.130.0\n*\n210.110.10.3\n25\n禁止访问SMTP\n\n\n允许\n*\n*\n210.110.10.1\n*\n允许访问WWW服务器\n\n\n允许\n*\n*\n210.110.10.3\n*\n允许访问邮件服务器\n\n\n禁止\n*\n*\n*\n*\n缺省\n\n\n\n\n\n\n\n\n动作\n源IP\n源端口\n目的IP\n目的端口\n说明\n\n\n\n禁止\n220.10.160.0\n*\n210.110.10.1\n80\n禁止访问WWW\n\n\n禁止\n230.101.130.0\n*\n210.110.10.3\n25\n禁止访问SMTP\n\n\n禁止\n240.10.12.1\n*\n210.110.10.1\n*\n禁止访问WWW服务器\n\n\n禁止\n240.10.12.1\n*\n210.110.10.3\n*\n禁止访问邮件服务器\n\n\n允许\n*\n*\n210.110.10.1\n*\n允许访问WWW服务器\n\n\n允许\n*\n*\n210.110.10.3\n*\n允许访问邮件服务器\n\n\n禁止\n*\n*\n*\n*\n缺省\n\n\n习题6-19：一位公司经理在外地洽谈业务，需要通过公共互联网从公司网络服务器下载一批商业资料和文件，请问：(1）如果不进行任何的安全防范而直接通过公共互联网下载商业资料会存在哪些安全风险？（2）如果该公司企业网己经建立了基于安全卫技术(IPsec)的网络安全系统，并对该经理试图访问的企业数据服务器进一步采用 Isec 进行了安全保护，则至少需要通过几条安全关联(SA)才能访问到该服务器？（3）如果该经理试图通过 IPsec 保密地与公司服务器传递文件，他应该选择哪种安全协议？该协议应该绑定在哪条安全关联上？(4)如果该公司企业网己经建立了基于 IPsec 的安全系统，并且该经理试图访问的企业数据服务器进一步采用 IPsec 进行了安全保护，则该经理离开公司前需要进行哪些处理？（5）如果该经理持有他自身私钥和该服务器的公钥，则他可以采用哪种安全关联创建协议建立安全关联，为什么？（6）试描述采用该安全关联创建协议进行协议交互的主要步骤。\n如果不采取安全防范技术，他获取的销售资料可能被窃取，可能被更改，可以被假冒， 可能无法访问到公司的服务器。\n\n4条\n\nESP，经理与安全网关互联的SA上\n\n通过安全途径获取用户标志和密钥\n\nIKE 选用主模式下基于公钥身份验证的安全关联创建协议\n\n$$\\begin{align*}&amp; M1:A \\to B:HDR,SA\\&amp; M2:B \\to A:HDR,SA\\&amp; M3:A \\to B:HDR,KE,[HASH(1)],PK_B{&lt;ID_{A1}&gt;},PK_B{}\\&amp; M4:B \\to A:HDR,KE,PK_A{&lt;ID_{B1}&gt;},PK_A{}\\&amp; M5:A \\to B:HDR*,HASH_A\\&amp; M6:B \\to A:HDR*,HASH_B\\end{align*}$$\nM1中 SA 有多个建议报文体，而M2中只有一个B选择的建议报文体。M3，M4采用对方公钥加密的 ID、N 报体，同时利用 KE 报体交换 Diffie-Hellman 公共值。M5、M6加密传递身份验证的哈希值。\n\n\n","tags":["南邮","南京邮电大学","信息安全技术"]},{"title":"在学校服务器上源码编译安装Mysql-8.0.25并运行","url":"//2021/10/26/%E5%9C%A8%E5%AD%A6%E6%A0%A1%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85Mysql-8-0-25%E5%B9%B6%E8%BF%90%E8%A1%8C/","content":"在学校服务器上源码编译安装Mysql-8.0.25并运行一、创建需要的目录连接NJUPT即可在自己的电脑上访问上课给的服务器，我懒得写一大堆命令，在MacOS系统的Transmit App里连接了服务器，之间图形界面把题目要求的文件夹建好了。\n# 目录如下~/mysql-8.0.25/my_build/package\n\n\n在package目录下还要\nmkdir bin lib share etc\n\n二、cmake编译老师说服务器上的cmake版本不够编译mysql-8.0.25，有cmake3.22的安装包但不是默认环境。\n总之先打开终端\n\n1、cmake编译我先copy一下PPT里给的命令看看什么效果。学校的服务器自带cmake，没有的可以自己配置一下。\ncmake .. \\-DCMAKE_INSTALL_PREFIX=$HOME/mysql-8.0.25/&#123;YOUR_DIRECTORY&#125;/package \\-DWITH_EXTRA_CHARSETS:STRING=all \\-DDOWNLOAD_BOOST=1 \\-DWITH_BOOST=../boost \\-DWITH_EMBEDDED_SERVER:BOOL=OFF \\-DWITH_MYISAM_STORAGE_ENGINE=1 \\-DWITH_INNOBASE_STORAGE_ENGINE=1 \\-DENABLED_LOCAL_INFILE=1 \\-DWITH_SSL=system \\-DCMAKE_CXX_COMPILER=/usr/bin/g++ \\-DCMAKE_C_COMPILER=/usr/bin/gcc\n\n\n没有出现报错，那接着往下，执行make -j 64。\n\n这个报错出现了超多次，使用cmake -version看了一下版本是3.22。g++ -version看g++版本是10.0.1。\n他妈的什么申必服务器，Google解决方案都要sudo但是学生账号没有服务器的sudo权限。\ng++: 错误：unrecognized command line option ‘-std=c++14’\n\n2、解决g++无法解析c++14的问题该说不说，学校这个服务器应该是被其他学生玩坏了，查了一下/user/bin目录下的gcc版本才4.8.5，害我大半夜在这疯狂找cmake指定gcc的方法。\n\n发现问题在/usr/bin下的gcc版本不够，那么干脆把B19031717文件夹下东西都删了，重新创建了package和下面的bin等四个目录。然后重新cmake编译一下。\n执行find / -name &quot;gcc&quot;命令发现gcc文件在/usr/local/bin下也有一个，并且版本是10.0.1，重新cmake编译时记得把DCMAKE_CXX_COMPILER和DCMAKE_C_COMPILER两个路径改成gcc版本高于5.2的路径（mysql-8.0.25需要gcc5.2以上）。\ncmake .. \\-DCMAKE_INSTALL_PREFIX=$HOME/mysql-8.0.25/&#123;YOUR_DIRECTORY&#125;/package \\-DWITH_EXTRA_CHARSETS:STRING=all \\-DDOWNLOAD_BOOST=1 \\-DWITH_BOOST=../boost \\-DWITH_EMBEDDED_SERVER:BOOL=OFF \\-DWITH_MYISAM_STORAGE_ENGINE=1 \\-DWITH_INNOBASE_STORAGE_ENGINE=1 \\-DENABLED_LOCAL_INFILE=1 \\-DWITH_SSL=system \\-DCMAKE_CXX_COMPILER=/usr/local/bin/g++ \\-DCMAKE_C_COMPILER=/usr/local/bin/gcc\n\n编译未报错，然后执行make -j 64\n\n执行make install\n\n执行cd package然后执行cp -r bin lib share etc ~/与 cd\n现在根目录就能看到bin、lib、share、etc四个文件夹，执行vim etc/my.cnf并写入如下内容。\n\n3、安装、初始化与启动# 安装mkdir -p ~/data/data ~/data/redo ~/data/tmp ~/data/binlog ~/data/relaylog ~/data/undomkdir log\n\n# 初始化./bin/mysqld --defaults-file=&quot;$HOME/etc/my.cnf&quot; --initialize-insecure --datadir=&quot;$HOME/data/data&quot; \n\n# 启动./bin/mysqld --defaults-file=&quot;$HOME/etc/my.cnf&quot; --datadir=&quot;$HOME/data/data&quot; --pid-file=&quot;$HOME/bin/mysqld1.pid&quot; &amp;\n\n安装没出现报错，但是初始化时产生了奇怪的问题。貌似是因为升级gcc时，生成的动态库没有替换老版本gcc的动态库。\n\n执行一下strings /usr/lib64/libstdc++.so.6 | grep GLIBC命令，发现如GLIBCXX的版本并不匹配。\n\n执行find / -name &quot;libstdc++.so*&quot;查找编译gcc时生成的最新动态库。发现了/usr/local/lib64/libstdc++.so.6.0.28 //最新动态库\n而在上图中使用的库是/usr/lib64/libstdc++.so.6。\n\n我们需要修改系统默认动态库的指向，即：重建默认库的软连接。但是学生账号没有权限，寄。\n气死了，马上到最后一步了，现在没有权限什么也干不了，早知道在自己的服务器上跑了！！\n","tags":["南邮","南京邮电大学","Mysql-8.0.25","实践周作业"]}]